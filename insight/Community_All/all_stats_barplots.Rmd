# Create bar plot
This script uses summary statistic data to create a bar plot.

```{r}
library(tidyverse)
```

```{r}
# setwd("C:/Users/vkuchhal/Documents/hepa-summer23")
summary_df <- read_csv("C:/Users/vkuchhal/Documents/hepa-summer23/summary/Community_All/s_All_M_quants.csv")

```

```{r}
stat_order <- c("q5", "q25", "median", "q75", "q95")
summary_df %>% filter(environment == "indoor", type == "pm25", case == "redu") %>%
  pivot_longer(cols = mean:sd, names_to = "stat") %>%
  filter(dep_class != "all", stat %in% c("q5", "q25", "median", "q75", "q95", "mean")) %>%
  mutate(stat = fct_relevel(stat, "q5", "q25", "median", "q75", "q95")) %>%
  ggplot() + geom_col(aes(x = dep_class, y = value, fill = stat), position = "dodge") +
  labs(x = "Deployment Class", y = "Percentage Reduction")
```
```{r}
load("C:/Users/vkuchhal/Documents/hepa-summer23/summary/Community_All/all.RData")
```


```{r}
all_df %>% 
  filter(environment == "indoor") %>%
  ggplot() +
  geom_boxplot(aes(x = dep_class, y = pm25, fill = case), outlier.shape = NA) +
  scale_y_continuous(limits = quantile(all_df$pm25, c(0.05, 0.95), na.rm = TRUE),
                     trans = "log10")
```

